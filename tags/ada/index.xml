<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Ada on w-i-p</title>
    <link>https://asurati.github.io/wip/tags/ada/</link>
    <description>Recent content in Ada on w-i-p</description>
    <generator>Hugo</generator>
    <language>en-us</language>
    <lastBuildDate>Tue, 05 Dec 2023 00:00:00 +0000</lastBuildDate>
    <atom:link href="https://asurati.github.io/wip/tags/ada/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>ada: Building ada-mode for Emacs</title>
      <link>https://asurati.github.io/wip/post/2023/12/05/ada-building-ada-mode-for-emacs/</link>
      <pubDate>Tue, 05 Dec 2023 00:00:00 +0000</pubDate>
      <guid>https://asurati.github.io/wip/post/2023/12/05/ada-building-ada-mode-for-emacs/</guid>
      <description>&lt;p&gt;This post lists steps that build&#xA;&lt;a href=&#34;https://elpa.gnu.org/packages/ada-mode.html&#34;&gt;&lt;code&gt;ada-mode&lt;/code&gt;&lt;/a&gt; for Emacs. The build&#xA;depends on the GNAT FSF compiler being available on the build system. On&#xA;Arch Linux, the compiler is available as the&#xA;&lt;a href=&#34;https://wiki.archlinux.org/title/Ada&#34;&gt;&lt;code&gt;gcc-ada&lt;/code&gt;&lt;/a&gt; package.&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;pre&gt;&lt;code class=&#34;language-bash&#34;&gt;    # build-ada-mode.sh&#xA;    # Run as: sh build-ada-mode.sh&#xA;&#xA;    set -e&#xA;    set -u&#xA;&#xA;    DOWNLOAD=true&#xA;    SRC=/tmp/src&#xA;    TOOLS=$HOME/tools/ada&#xA;    LR1_SRC=ada_annex_p_lr1_parse_table.txt-8.1.0&#xA;    LR1_TAB=ada_annex_p_lr1_re2c_parse_table.txt&#xA;    LR1_URL=https://download.savannah.nongnu.org/releases/ada-mode/$LR1_SRC&#xA;    SAVE=$PATH&#xA;&#xA;    mkdir -p $SRC&#xA;    if [ &amp;quot;$DOWNLOAD&amp;quot; == &amp;quot;true&amp;quot; ]; then&#xA;        cd $SRC&#xA;        git clone --depth 1 https://github.com/AdaCore/gprbuild.git&#xA;        git clone --depth 1 https://github.com/AdaCore/xmlada.git&#xA;        git clone --depth 1 https://github.com/AdaCore/gprconfig_kb.git&#xA;        git clone --depth 1 https://github.com/AdaCore/gnatcoll-core.git&#xA;        git clone --depth 1 --single-branch --branch externals/wisi \&#xA;            https://git.savannah.gnu.org/git/emacs/elpa.git wisi&#xA;        git clone --depth 1 --single-branch --branch externals/ada-mode \&#xA;            https://git.savannah.gnu.org/git/emacs/elpa.git ada-mode&#xA;        git clone --depth 1 --single-branch --branch externals/gpr-mode \&#xA;            https://git.savannah.gnu.org/git/emacs/elpa.git gpr-mode&#xA;        sed -i &#39;/wisitoken-bnf-generate/d&#39; $SRC/ada-mode/build.sh&#xA;        wget --show-progress -O $LR1_TAB $LR1_URL&#xA;    fi&#xA;&#xA;    # Bootstrap GPRbuild&#xA;    cd $SRC/gprbuild&#xA;    ./bootstrap.sh --with-xmlada=../xmlada --with-kb=../gprconfig_kb \&#xA;    --prefix=$TOOLS/bgprb&#xA;    export PATH=$SAVE:$TOOLS/bgprb/bin&#xA;&#xA;    # XML/Ada&#xA;    cd $SRC/xmlada&#xA;    ./configure --prefix=$TOOLS/xmlada --enable-shared&#xA;    make&#xA;    make install&#xA;    export GPR_PROJECT_PATH=$TOOLS/xmlada/share/gpr&#xA;&#xA;    # GPRbuild&#xA;    cd $SRC/gprbuild&#xA;    make prefix=$TOOLS/gprb setup&#xA;    make LIBRARY_TYPE=relocatable all&#xA;    make libgpr.build&#xA;    make install&#xA;    make libgpr.install&#xA;    export PATH=$SAVE:$TOOLS/gprb/bin&#xA;    export GPR_PROJECT_PATH=$GPR_PROJECT_PATH:$TOOLS/gprb/share/gpr&#xA;&#xA;    # GNATcoll-Core&#xA;    cd $SRC/gnatcoll-core&#xA;    make prefix=$TOOLS/gc setup&#xA;    make&#xA;    make install&#xA;    export GPR_PROJECT_PATH=$GPR_PROJECT_PATH:$TOOLS/gc/share/gpr&#xA;&#xA;    # ada-mode&#xA;    cd $SRC/ada-mode&#xA;    export WISI_DIR=../wisi&#xA;    ./build.sh&#xA;    ./install.sh $TOOLS/am&#xA;&#xA;    # lr1 table&#xA;    mv $SRC/$LR1_TAB $TOOLS/am/bin/&#xA;&#xA;    # gpr-mode&#xA;    cd $SRC/gpr-mode&#xA;    ./build.sh&#xA;    ./install.sh $TOOLS/gm&#xA;&#xA;    # Run &#39;strip -s&#39; on gprbuild, ada-mode and gpr-mode binaries.&#xA;&lt;/code&gt;&lt;/pre&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 id=&#34;emacs-configuration&#34;&gt;Emacs configuration:&lt;/h3&gt;&#xA;&lt;p&gt;Modify the Emacs init file, to append &lt;code&gt;exec-path&lt;/code&gt; with the paths to the&#xA;&lt;code&gt;ada-mode&lt;/code&gt; and &lt;code&gt;gpr-mode&lt;/code&gt; binaries.&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
